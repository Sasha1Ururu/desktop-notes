Desktop Notes Plasmoid - Setup and Installation Instructions

This guide provides instructions on how to build and install the Desktop Notes Plasmoid.

Prerequisites:
----------------
- A Linux system with KDE Plasma Desktop (ideally Plasma 5 / KF5 based, given the current dependencies).
  (Note: While the spec mentioned Plasma 6, the current Python bindings (PyKDE5) and CMake setup (KF5Plasma) are for Plasma 5/KF5. Adapting fully to Plasma 6 would require different Python bindings and CMake configuration for KF6/Qt6.)
- Standard build tools: `cmake`, `make`, a C++ compiler (like `g++`).
- KDE Frameworks 5 development packages (e.g., `kdelibs5-dev`, `plasma-framework-dev`, or their equivalents for your distribution like `kf5-plasma-devel`).
- Qt 5 development packages (e.g., `qtbase5-dev`, `qtdeclarative5-dev`).
- Python 3 and the PyKDE5 bindings. (Installation of PyKDE5 can vary by distribution).

Build Steps:
----------------
1.  Navigate to the `desktop-notes-plasmoid` directory (where this `how-to-setup.txt` and `CMakeLists.txt` are located).
    ```bash
    cd path/to/desktop-notes-plasmoid
    ```

2.  Create a build directory and navigate into it. This is standard practice for CMake builds to keep the source directory clean.
    ```bash
    mkdir build
    cd build
    ```

3.  Run CMake to configure the build system. This will check for dependencies and prepare the build files.
    ```bash
    cmake ..
    ```
    If you need to specify a particular installation prefix (e.g., for local user install if you don't have root), you can add `-DCMAKE_INSTALL_PREFIX=/path/to/your/prefix` to the cmake command. For system-wide installation, the default paths are usually correct. For local user installation of Plasma widgets, the path is typically `~/.local/share/plasma/plasmoids/`. CMake's `KF5_PLUGINS_INSTALL_DIR` usually resolves to a system path like `/usr/lib/x86_64-linux-gnu/qt5/plugins/` or `/usr/share/kservices5/`. The `PLASMA_APPLET_INSTALL_DIR` in CMakeLists.txt is set to `${KF5_PLUGINS_INSTALL_DIR}/plasma/applets/`.

    For a local user install, you might need to override `PLASMA_APPLET_INSTALL_DIR` or ensure `KF5_PLUGINS_INSTALL_DIR` points to a user-local path if CMake doesn't pick it up correctly for user installs. A common way is:
    ```bash
    cmake .. -DCMAKE_INSTALL_PREFIX=~/.local -DKDE_INSTALL_USE_QT_SYS_PATHS=ON
    ```
    Then the plasmoid would be installed under `~/.local/share/plasma/plasmoids/`. Check your distribution's specifics for KDE user paths if needed.

4.  Compile the plasmoid (though for a Python/QML plasmoid, this step might not do much actual compilation, it finalizes packaging steps).
    ```bash
    make
    ```

Installation:
----------------
1.  Install the plasmoid to the system or user Plasma directories.
    *   For system-wide installation (requires root/sudo privileges):
        ```bash
        sudo make install
        ```
    *   For local user installation (if `CMAKE_INSTALL_PREFIX` was set to `~/.local` or similar):
        ```bash
        make install
        ```

2.  After installation, you usually need to inform Plasma about the new plasmoid. This can often be done by:
    *   Logging out and logging back into your Plasma session.
    *   Or, for developers, sometimes running `kbuildsycoca5 --noincremental` (for KF5/Plasma5) or the Plasma 6 equivalent (`kbuildsycoca6 --noincremental`) can help Plasma recognize new plugins without a full logout/login.

    For Plasma 6, if using `kpackagetool6`:
    The `CMakeLists.txt` includes a `make package` step which should generate a `.plasmoid` or `.tar.gz` file. This can then be installed using:
    ```bash
    kpackagetool6 -t Plasma/Applet -i generated_package_file.plasmoid
    # or
    # kpackagetool6 -t Plasma/Applet -i generated_package_file.tar.gz
    ```
    And to upgrade:
    ```bash
    kpackagetool6 -t Plasma/Applet -u generated_package_file.plasmoid
    ```

Usage:
----------------
1.  Once installed and Plasma is aware of it, right-click on your desktop or panel.
2.  Select "Add Widgets..." (or the equivalent in your Plasma version).
3.  Search for "Desktop Notes" in the widget explorer.
4.  Drag and drop the "Desktop Notes" widget onto your desktop.

Troubleshooting:
-------------------
- If the plasmoid does not show up:
    - Double-check the installation paths. Ensure `org.kde.plasma.desktopnotes` directory is correctly placed in a location Plasma searches (e.g., `/usr/share/plasma/plasmoids/` or `~/.local/share/plasma/plasmoids/`).
    - Verify that `metadata.json` and all `contents/` files are correctly installed within the `org.kde.plasma.desktopnotes` directory.
    - Check system logs (e.g., `journalctl --user -xe`) or Plasma-specific logs for errors related to loading plasmoids.
- Python dependency issues: Ensure PyKDE5 (or the relevant Python bindings for your Plasma version) are correctly installed and accessible by the Python interpreter used by Plasma.
- File permissions: Ensure installed files have correct read permissions.
```
